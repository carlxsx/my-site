<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C.MIGUEL // SYSTEM_ONLINE</title>
    <link rel="icon" type="image/png" sizes="50x50" href="resume/cm.png">
    <link rel="stylesheet" href="style.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/lucide@latest" defer></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js" defer></script>
</head>
<body>

    <canvas id="particleCanvas"></canvas>
    <div class="crt-overlay"></div>

    <div id="successOverlay" class="success-overlay">
        <div class="overlay-content">
            <div class="glitch-text" data-text="TRANSMISSION_COMPLETE">TRANSMISSION_COMPLETE</div>
            <p>MESSAGE_RELAYED_TO_CENTRAL_COMMAND</p>
            <div class="loading-bar"><div class="bar-fill"></div></div>
        </div>
    </div>

    <nav class="top-bar boot-hidden" style="transition-delay: 200ms;">
        <div class="status-indicator">
            <span class="blink"></span> SYSTEM_ACTIVE // 2026
        </div>
        <div class="nav-links">
            <a href="#work">Work</a>
            <a href="#about">Profile</a>
            <a href="#contact">Connect</a>
        </div>
        <button class="menu-toggle" id="menuBtn" aria-label="Toggle Menu">Menu</button>
    </nav>

    <div class="mobile-overlay" id="mobileMenu">
        <a href="#work" class="mobile-link">[ 01_WORK ]</a>
        <a href="#about" class="mobile-link">[ 02_PROFILE ]</a>
        <a href="#contact" class="mobile-link">[ 03_CONNECT ]</a>
        <button class="menu-toggle close-btn" style="margin-top: 2rem;">CLOSE_TERMINAL</button>
    </div>

    <main class="main-layout">
        <section class="left-pane boot-hidden" style="transition-delay: 400ms;">
            <div class="hero-content">
                <span class="version">LOC: 14.65N_121.05E // MNL</span>
                <h1 id="heroTitle" class="reveal-text" data-value="CARLOS MIGUEL">CARLOS MIGUEL</h1>
                <p class="role-desc">Fullstack Engineer specialized in high-performance digital systems and technical minimalism.</p>
                
                <div class="social-icons">
                    <a href="https://github.com/carinokarlos" target="_blank" rel="noopener noreferrer" title="GitHub"><i data-lucide="github"></i></a>
                    <a href="https://linkedin.com/in/..." target="_blank" rel="noopener noreferrer" title="LinkedIn"><i data-lucide="linkedin"></i></a>
                    <a href="https://facebook.com/..." target="_blank" rel="noopener noreferrer" title="Facebook"><i data-lucide="facebook"></i></a>
                    <a href="mailto:miguel.carlosc27@gmail.com" title="Email"><i data-lucide="mail"></i></a>
                </div>
            </div>
        </section>

        <section class="right-pane boot-hidden" style="transition-delay: 600ms;">
            <div class="scroll-content">
                
                <div id="work" class="section-container">
                    <div class="block-header reveal-text" data-value="01 // LIVE_REPOSITORIES">01 // LIVE_REPOSITORIES</div>
                    
                    <div class="project-list" id="githubFeed">
                        <div class="cli-line" style="margin-bottom: 20px; color: #666;">>> INITIATING_UPLINK: api.github.com/users/carinokarlos...</div>
                        
                        <a href="https://github.com/carinokarlos" target="_blank" rel="noopener noreferrer" class="project-row">
                            <div class="p-left">
                                <div class="p-title-group">
                                    <span class="p-num">01</span>
                                    <span class="p-name">CONNECTING...</span>
                                </div>
                                <span class="p-status">[ WAITING_FOR_RESPONSE ]</span>
                            </div>
                        </a>
                    </div>
                </div>

                <div id="about" class="section-container">
                    <div class="block-header reveal-text" data-value="02 // PROFILE_LOG">02 // PROFILE_LOG</div>
                    <div class="about-text">
                        <p>I bridge the gap between design and engineering. Currently pursuing BSIT at National University — Fairview.</p>
                        
                        <div class="skill-terminal">
                            <span class="skill-line"><span class="prompt">guest@carinokarlos:~$</span> ./list_skills.sh</span>
                            <span class="skill-line"><span class="prompt">> LOADING CORE:</span> [ MERN_STACK ] [ ELECTRON ] [ JAVA ]</span>
                            <span class="skill-line"><span class="prompt">> LOADING TOOLS:</span> [ TAILWIND ] [ SQL ] [ GIT ]</span>
                            <span class="skill-line"><span class="prompt">> STATUS:</span> READY_TO_DEPLOY <span class="cmd-cursor"></span></span>
                        </div>
                        <br>
                        
                        <a href="resume/Carlos-Miguel-Angeles-Carino.pdf" class="cv-btn" target="_blank">
                            <i data-lucide="file-text"></i> DOWNLOAD_CV.PDF
                        </a>
                    </div>
                </div>

                <div id="contact" class="section-container">
                    <div class="block-header reveal-text" data-value="03 // ESTABLISH_COMM">03 // ESTABLISH_COMM</div>
                    <form class="terminal-form">
                        <input type="text" id="alt_email_check" style="display:none !important" tabindex="-1" autocomplete="off">
                        <div class="form-row">
                            <label for="user_name">NAME:</label>
                            <input type="text" id="user_name" name="user_name" required placeholder="_">
                        </div>
                        <div class="form-row">
                            <label for="user_email">EMAIL:</label>
                            <input type="email" id="user_email" name="user_email" required placeholder="_">
                        </div>
                        <div class="form-row">
                            <label for="message">MESSAGE:</label>
                            <textarea id="message" name="message" rows="4" required placeholder="Enter transmission..."></textarea>
                        </div>
                        <button type="submit" class="submit-btn">EXECUTE_SEND</button>
                    </form>
                </div>

                <footer class="bottom-footer">
                    <div class="footer-line"></div>
                    <p>© 2026 // CARLOS MIGUEL CARIÑO // ALL_RIGHTS_RESERVED</p>
                </footer>
            </div>
        </section>
    </main>

    <div class="cli-container" id="cliContainer">
        <div class="cli-output" id="cliOutput">
            <div class="cli-line">Welcome to C.MIGUEL OS [Version 10.0.19045.3693]</div>
            <div class="cli-line">Type 'help' for available commands.</div>
        </div>
        <div class="cli-input-area">
            <span class="prompt-char">></span>
            <input type="text" id="cliInput" placeholder="Enter command..." autocomplete="off">
        </div>
    </div>

    <button id="cliTrigger" class="cli-trigger" aria-label="Open Terminal">
        >_ TERMINAL
    </button>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- CORE CONFIG ---
            const GITHUB_USERNAME = "carlxsx";
            const EMAILJS_PUBLIC_KEY = "YWcE_pEySg9VCN6KU"; 
            const EMAILJS_SERVICE_ID = "service_2fb81h6";
            const EMAILJS_ADMIN_TEMPLATE = "template_h0gz7ix";
            const EMAILJS_AUTOREPLY_TEMPLATE = "template_jqj3873";
            const LOCKOUT_TIME_MS = 10 * 60 * 1000;

            // --- 1. OPTION F: LIVE GITHUB FEED ---
            async function initGitHubFeed() {
                const container = document.getElementById('githubFeed');
                
                try {
                    // Fetch repos sorted by latest update
                    const response = await fetch(`https://api.github.com/users/${GITHUB_USERNAME}/repos?sort=updated&direction=desc&per_page=4`);
                    
                    if (!response.ok) throw new Error("GitHub API Error");
                    
                    const repos = await response.json();
                    
                    // Clear loading/fallback content
                    container.innerHTML = '';

                    repos.forEach((repo, index) => {
                        // Create Project Row
                        const row = document.createElement('a');
                        row.href = repo.html_url;
                        row.target = "_blank";
                        row.rel = "noopener noreferrer";
                        row.className = "project-row";
                        
                        // Format description (truncate if too long)
                        let desc = repo.description || "[ NO_DESCRIPTION_AVAILABLE ]";
                        if (desc.length > 50) desc = desc.substring(0, 50) + "...";
                        
                        // Format Language
                        const lang = repo.language ? repo.language.toUpperCase() : "RAW_CODE";

                        row.innerHTML = `
                            <div class="p-left">
                                <div class="p-title-group">
                                    <span class="p-num">0${index + 1}</span>
                                    <span class="p-name">${repo.name.toUpperCase()}</span>
                                    <span class="p-tag">${lang}</span>
                                </div>
                                <span class="p-status">[ ${desc.toUpperCase()} ] <span style="color: gold; margin-left:10px;">★ ${repo.stargazers_count}</span></span>
                            </div>
                            <i data-lucide="external-link"></i>
                        `;

                        container.appendChild(row);
                    });

                    // IMPORTANT: Re-initialize 3D Tilt and Icons on new elements
                    if (typeof lucide !== 'undefined') lucide.createIcons();
                    initTiltEffect(); 

                } catch (error) {
                    console.error("GitHub Feed Failed:", error);
                    // If failed, we keep the fallback HTML or show an error
                    const statusLine = container.querySelector('.cli-line');
                    if (statusLine) statusLine.innerHTML = ">> UPLINK_FAILED. DISPLAYING_OFFLINE_CACHE.";
                }
            }

            // --- 2. OPTION H: DECRYPT TEXT REVEAL ---
            function initDecryptEffect() {
                const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&";
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            let iterations = 0;
                            const target = entry.target;
                            const originalText = target.dataset.value || target.innerText;
                            if (target.classList.contains('decrypted')) return;
                            const interval = setInterval(() => {
                                target.innerText = originalText.split("").map((letter, index) => {
                                    if (index < iterations) return originalText[index];
                                    return letters[Math.floor(Math.random() * letters.length)];
                                }).join("");
                                if (iterations >= originalText.length) {
                                    clearInterval(interval);
                                    target.classList.add('decrypted');
                                    target.innerText = originalText; 
                                }
                                iterations += 1 / 2; 
                            }, 30);
                        }
                    });
                }, { threshold: 0.1 });
                document.querySelectorAll('.reveal-text').forEach(el => observer.observe(el));
            }

            // --- 3. OPTION I: 3D TILT EFFECT ---
            function initTiltEffect() {
                const cards = document.querySelectorAll('.project-row');
                cards.forEach(card => {
                    // Avoid duplicate glares if re-initialized
                    if(card.querySelector('.glare')) return;

                    const glare = document.createElement('div');
                    glare.className = 'glare';
                    card.appendChild(glare);
                    card.addEventListener('mousemove', (e) => {
                        const rect = card.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        const centerX = rect.width / 2;
                        const centerY = rect.height / 2;
                        const rotateX = ((y - centerY) / centerY) * -5; 
                        const rotateY = ((x - centerX) / centerX) * 5;
                        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
                        const glareX = (x / rect.width) * 100;
                        const glareY = (y / rect.height) * 100;
                        glare.style.background = `radial-gradient(circle at ${glareX}% ${glareY}%, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0) 80%)`;
                    });
                    card.addEventListener('mouseleave', () => {
                        card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) scale(1)';
                        glare.style.opacity = '0';
                    });
                });
            }

            // --- 4. PARTICLE NETWORK ---
            function initParticles() {
                const canvas = document.getElementById('particleCanvas');
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                let particles = [];
                let width, height;
                function resize() {
                    width = window.innerWidth;
                    height = window.innerHeight;
                    canvas.width = width;
                    canvas.height = height;
                }
                window.addEventListener('resize', resize);
                resize();
                class Particle {
                    constructor() {
                        this.x = Math.random() * width;
                        this.y = Math.random() * height;
                        this.vx = (Math.random() - 0.5) * 0.5;
                        this.vy = (Math.random() - 0.5) * 0.5;
                        this.size = Math.random() * 2 + 1;
                    }
                    update() {
                        this.x += this.vx;
                        this.y += this.vy;
                        if (this.x < 0 || this.x > width) this.vx *= -1;
                        if (this.y < 0 || this.y > height) this.vy *= -1;
                    }
                    draw() {
                        ctx.fillStyle = 'rgba(0, 255, 0, 0.5)';
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
                function createParticles() {
                    const particleCount = width > 768 ? 80 : 40; 
                    for (let i = 0; i < particleCount; i++) particles.push(new Particle());
                }
                function animateParticles() {
                    ctx.clearRect(0, 0, width, height);
                    particles.forEach((p, index) => {
                        p.update();
                        p.draw();
                        for (let j = index + 1; j < particles.length; j++) {
                            const p2 = particles[j];
                            const dx = p.x - p2.x;
                            const dy = p.y - p2.y;
                            const dist = Math.sqrt(dx * dx + dy * dy);
                            if (dist < 100) {
                                ctx.strokeStyle = `rgba(0, 255, 0, ${1 - dist/100})`;
                                ctx.lineWidth = 0.5;
                                ctx.beginPath();
                                ctx.moveTo(p.x, p.y);
                                ctx.lineTo(p2.x, p2.y);
                                ctx.stroke();
                            }
                        }
                    });
                    requestAnimationFrame(animateParticles);
                }
                createParticles();
                animateParticles();
            }

            // --- 5. CLI TERMINAL ---
            function initCLI() {
                const cliContainer = document.getElementById('cliContainer');
                const input = document.getElementById('cliInput');
                const output = document.getElementById('cliOutput');
                const triggerBtn = document.getElementById('cliTrigger');

                function openCLI() {
                    cliContainer.style.display = 'flex';
                    setTimeout(() => {
                        cliContainer.style.transform = 'translateY(0)';
                        document.body.classList.add('cli-open');
                        input.focus();
                    }, 10);
                }
                function closeCLI() {
                    cliContainer.style.transform = 'translateY(100%)';
                    document.body.classList.remove('cli-open');
                    setTimeout(() => { cliContainer.style.display = 'none'; }, 300);
                }

                if (triggerBtn) triggerBtn.addEventListener('click', openCLI);

                document.addEventListener('keydown', (e) => {
                    if (e.key === '`' || e.key === '~') {
                        e.preventDefault();
                        document.body.classList.contains('cli-open') ? closeCLI() : openCLI();
                    }
                    if (e.key === 'Escape' && document.body.classList.contains('cli-open')) closeCLI();
                });

                const commands = {
                    'help': 'Available commands: about, work, contact, clear, date, whoami, exit',
                    'whoami': 'User: GUEST_ACCESS // ID: 00-721-X',
                    'date': () => new Date().toLocaleString(),
                    'clear': () => { output.innerHTML = ''; return null; },
                    'about': () => { document.querySelector('#about').scrollIntoView({ behavior: 'smooth' }); return 'Navigating to [PROFILE_LOG]...'; },
                    'work': () => { document.querySelector('#work').scrollIntoView({ behavior: 'smooth' }); return 'Navigating to [SELECTED_PROJECTS]...'; },
                    'contact': () => { document.querySelector('#contact').scrollIntoView({ behavior: 'smooth' }); return 'Navigating to [ESTABLISH_COMM]...'; },
                    'exit': () => { closeCLI(); return 'Terminating session...'; }
                };

                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        const cmd = input.value.trim().toLowerCase();
                        if (cmd) {
                            const cmdLine = document.createElement('div');
                            cmdLine.className = 'cli-line';
                            cmdLine.innerHTML = `<span class="prompt-char">></span> <span class="cli-cmd">${input.value}</span>`;
                            output.appendChild(cmdLine);
                            let response = commands[cmd] ? (typeof commands[cmd] === 'function' ? commands[cmd]() : commands[cmd]) : `<span class="cli-error">Command not found: ${cmd}</span>`;
                            if (response) {
                                const respLine = document.createElement('div');
                                respLine.className = 'cli-line cli-success';
                                respLine.innerHTML = response;
                                output.appendChild(respLine);
                            }
                            output.scrollTop = output.scrollHeight;
                            input.value = '';
                        }
                    }
                });
            }

            // --- 6. INITIALIZATION & UTILITIES ---
            if (typeof lucide !== 'undefined') lucide.createIcons();
            if (typeof emailjs !== 'undefined') emailjs.init(EMAILJS_PUBLIC_KEY);

            initParticles();
            initCLI();
            initDecryptEffect(); 
            initGitHubFeed(); // Starts the API Call

            setTimeout(() => {
                document.querySelectorAll('.boot-hidden').forEach(el => el.classList.add('boot-visible'));
            }, 100);

            function updateClock() {
                const statusElement = document.querySelector('.status-indicator');
                if (!statusElement) return;
                const now = new Date();
                const options = { timeZone: 'Asia/Manila', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
                statusElement.innerHTML = `<span class="blink"></span> SYSTEM_ACTIVE // ${new Intl.DateTimeFormat('en-GB', options).format(now)} // 2026`;
            }
            setInterval(updateClock, 1000);
            updateClock();

            const menuBtn = document.getElementById('menuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileLinks = document.querySelectorAll('.mobile-link, .close-btn');
            const rightPane = document.querySelector('.right-pane');
            function toggleMenu() {
                const isActive = mobileMenu.classList.toggle('active');
                menuBtn.innerText = isActive ? 'Close' : 'Menu';
            }
            if (menuBtn) {
                menuBtn.addEventListener('click', toggleMenu);
                mobileLinks.forEach(link => link.addEventListener('click', toggleMenu));
            }

            document.querySelectorAll('a[href^="#"]').forEach(link => {
                link.addEventListener('click', function(e) {
                    const targetId = this.getAttribute('href');
                    const targetSection = document.querySelector(targetId);
                    if (targetSection) {
                        e.preventDefault();
                        if (window.innerWidth > 900 && rightPane) {
                            rightPane.scrollTo({ top: targetSection.offsetTop, behavior: 'smooth' });
                        } else {
                            window.scrollTo({ top: targetSection.getBoundingClientRect().top + window.pageYOffset - 80, behavior: 'smooth' });
                        }
                    }
                });
            });

            // Form Logic
            const contactForm = document.querySelector('.terminal-form');
            const successOverlay = document.getElementById('successOverlay');
            if (contactForm) {
                const btn = contactForm.querySelector('.submit-btn');
                function updateLockoutButton(remainingMs) {
                    if (remainingMs <= 0) {
                        btn.innerText = "EXECUTE_SEND";
                        btn.style.opacity = "1";
                        btn.disabled = false;
                        btn.style.cursor = "pointer";
                        localStorage.removeItem('email_cooldown');
                        return;
                    }
                    const mins = Math.ceil(remainingMs / 60000);
                    btn.innerText = `SYSTEM_LOCKED: ${mins}m_REMAINING`;
                    btn.style.opacity = "0.5";
                    btn.disabled = true;
                    btn.style.cursor = "not-allowed";
                    setTimeout(() => updateLockoutButton(localStorage.getItem('email_cooldown') - Date.now()), 10000);
                }
                const savedCooldown = localStorage.getItem('email_cooldown');
                if (savedCooldown && savedCooldown - Date.now() > 0) updateLockoutButton(savedCooldown - Date.now());

                contactForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    if (document.getElementById('alt_email_check').value !== "") return;
                    btn.innerText = "STATUS: SENDING_VIA_RELAY...";
                    btn.style.opacity = "0.7";
                    btn.disabled = true;
                    const params = {
                        from_name: contactForm.querySelector('[name="user_name"]').value,
                        reply_to: contactForm.querySelector('[name="user_email"]').value,
                        message: contactForm.querySelector('[name="message"]').value,
                        date: new Date().toLocaleString()
                    };
                    emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_ADMIN_TEMPLATE, params).then(() => {
                        emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_AUTOREPLY_TEMPLATE, params);
                        localStorage.setItem('email_cooldown', Date.now() + LOCKOUT_TIME_MS);
                        successOverlay.classList.add('active');
                        contactForm.reset();
                        btn.innerText = "COMMAND_EXECUTED";
                        setTimeout(() => { successOverlay.classList.remove('active'); updateLockoutButton(LOCKOUT_TIME_MS); }, 3000);
                    }).catch(() => {
                        btn.innerText = "CRITICAL_ERROR: RETRY";
                        btn.style.opacity = "1";
                        btn.disabled = false;
                    });
                });
            }
        });
    </script>
</body>
</html>
